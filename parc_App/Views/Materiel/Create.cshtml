@model parc_App.ViewModel.MaterielCreateViewModel

@{
    ViewData["Title"] = "Ajouter un matériel";
}

<div class="centered-form-page">
    <form asp-action="Create" method="post" class="form-box">
        <h2 class="form-title">@ViewData["Title"]</h2>

        <!-- Type de matériel -->
        <div class="form-group">
            <label asp-for="TypeMateriel"></label>
            <select asp-for="TypeMateriel" class="form-control" id="typeMaterielSelect" required>
                <option value="">-- Sélectionnez le type --</option>
                <option value="PC">PC</option>
                <option value="Imprimante">Imprimante</option>
                <option value="Serveur">Serveur</option>
                <option value="Scanner">Scanner</option>
                <option value="Écran">Écran</option>
                <option value="Autre">Autre</option>
            </select>
            <span asp-validation-for="TypeMateriel" class="text-danger"></span>
        </div>

        <!-- Champ texte pour nouveau type -->
        <div class="form-group" id="nouveauTypeField" style="display:none;">
            <label for="NouveauType">Veuillez préciser le type :</label>
            <input type="text" name="NouveauType" class="form-control" placeholder="Ex: Onduleur, Routeur..." />
        </div>

        <!-- Champs communs -->
        <div class="form-group">
            <label asp-for="Marque"></label>
            <input asp-for="Marque" class="form-control" placeholder="Ex: Dell, HP..." />
            <span asp-validation-for="Marque" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Modele"></label>
            <input asp-for="Modele" class="form-control" />
            <span asp-validation-for="Modele" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="NumeroSerie"></label>
            <input asp-for="NumeroSerie" class="form-control" placeholder="Numéro de série" />
            <span asp-validation-for="NumeroSerie" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Description"></label>
            <textarea asp-for="Description" class="form-control"></textarea>
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>

        <!-- ==== Champs dynamiques avec validations ==== -->
        <!-- PC -->
        <div id="pcFields" class="type-specific" style="display:none;">
            <div class="form-group">
                <label asp-for="OS"></label>
                <input asp-for="OS" class="form-control" />
                <span asp-validation-for="OS" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="RAM"></label>
                <input asp-for="RAM" class="form-control" placeholder="Ex: 8 Go" />
                <span asp-validation-for="RAM" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CPU"></label>
                <input asp-for="CPU" class="form-control" />
                <span asp-validation-for="CPU" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Stockage"></label>
                <input asp-for="Stockage" class="form-control" />
                <span asp-validation-for="Stockage" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="AdresseMAC"></label>
                <input asp-for="AdresseMAC" class="form-control" placeholder="Ex: 00:1A:2B:3C:4D:5E" />
                <span asp-validation-for="AdresseMAC" class="text-danger"></span>
            </div>
        </div>

        <!-- Imprimante -->
        <div id="imprimanteFields" class="type-specific" style="display:none;">
            <div class="form-group">
                <label asp-for="TypeImpression"></label>
                <input asp-for="TypeImpression" class="form-control" />
                <span asp-validation-for="TypeImpression" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="VitesseImpression"></label>
                <input asp-for="VitesseImpression" class="form-control" placeholder="Ex: 20 ppm" />
                <span asp-validation-for="VitesseImpression" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Resolution"></label>
                <input asp-for="Resolution" class="form-control" placeholder="Ex: 1200 dpi" />
                <span asp-validation-for="Resolution" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Connectivite"></label>
                <input asp-for="Connectivite" class="form-control" placeholder="Ex: USB, Wi-Fi..." />
                <span asp-validation-for="Connectivite" class="text-danger"></span>
            </div>
        </div>

        <!-- Serveur -->
        <div id="serveurFields" class="type-specific" style="display:none;">
            <div class="form-group">
                <label asp-for="NombreDeSlotsRAM"></label>
                <input asp-for="NombreDeSlotsRAM" class="form-control" type="number" min="1" />
                <span asp-validation-for="NombreDeSlotsRAM" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="TypeRAID"></label>
                <input asp-for="TypeRAID" class="form-control" placeholder="Ex: RAID 0, RAID 1..." />
                <span asp-validation-for="TypeRAID" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="AdresseIP"></label>
                <input asp-for="AdresseIP" class="form-control" placeholder="Ex: 192.168.1.1" />
                <span asp-validation-for="AdresseIP" class="text-danger"></span>
            </div>
        </div>

        <!-- Scanner -->
        <div id="scannerFields" class="type-specific" style="display:none;">
            <div class="form-group">
                <label asp-for="TypeScanner"></label>
                <input asp-for="TypeScanner" class="form-control" placeholder="Ex: À plat, Portable..." />
                <span asp-validation-for="TypeScanner" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="VitesseScan"></label>
                <input asp-for="VitesseScan" class="form-control" placeholder="Ex: 10 ppm" />
                <span asp-validation-for="VitesseScan" class="text-danger"></span>
            </div>
        </div>

        <!-- Écran -->
        <div id="ecranFields" class="type-specific" style="display:none;">
            <div class="form-group">
                <label asp-for="Taille"></label>
                <input asp-for="Taille" class="form-control" placeholder="Ex: 24" />
                <span asp-validation-for="Taille" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="TypeEcran"></label>
                <input asp-for="TypeEcran" class="form-control" placeholder="Ex: LED, IPS..." />
                <span asp-validation-for="TypeEcran" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="TempsDeReponse"></label>
                <input asp-for="TempsDeReponse" class="form-control" placeholder="Ex: 5 ms" />
                <span asp-validation-for="TempsDeReponse" class="text-danger"></span>
            </div>
        </div>

        <button type="submit" class="btn-submit">➕ Ajouter</button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        function toggleTypeFields() {
            const type = document.getElementById("typeMaterielSelect").value;
            document.querySelectorAll(".type-specific").forEach(div => div.style.display = "none");

            if (type === "PC") document.getElementById("pcFields").style.display = "block";
            else if (type === "Imprimante") document.getElementById("imprimanteFields").style.display = "block";
            else if (type === "Serveur") document.getElementById("serveurFields").style.display = "block";
            else if (type === "Scanner") document.getElementById("scannerFields").style.display = "block";
            else if (type === "Écran") document.getElementById("ecranFields").style.display = "block";

            const autreField = document.getElementById("nouveauTypeField");
            if (type === "Autre") {
                autreField.style.display = "block";
            } else {
                autreField.style.display = "none";
                autreField.querySelector("input").value = "";
            }
        }

        document.getElementById("typeMaterielSelect").addEventListener("change", toggleTypeFields);
        window.onload = toggleTypeFields;
    </script>
}

<style>
    body {
        background: linear-gradient(135deg, #0d5586, #1e88a8);
        font-family: "Roboto", sans-serif;
    }

    .centered-form-page {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        padding: 40px 15px;
    }

    .form-box {
        background: #fff;
        padding: 25px 30px;
        border-radius: 15px;
        box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        max-width: 650px;
        width: 100%;
    }

    .form-title {
        text-align: center;
        font-weight: 700;
        font-size: 26px;
        margin-bottom: 25px;
        color: #0d5586;
        position: relative;
    }

        .form-title::after {
            content: "";
            display: block;
            width: 60px;
            height: 3px;
            background: #1e88a8;
            margin: 8px auto 0;
            border-radius: 2px;
        }

    /* Label plus visible */
    .form-group label[for="TypeMateriel"] {
        font-weight: 800; /* Poids encore plus fort */
        font-size: 16px; /* Taille augmentée */
        margin-bottom: 10px; /* Plus d'espace */
        display: block;
        color: #000000; /* Texte noir */
        background-color: #e6f0fa; /* Fond léger pour le label */
        padding: 4px 8px; /* Petit padding pour le fond */
        border-radius: 4px; /* Coins arrondis */
    }

    /* Champ Type de matériel plus visible */
    #typeMaterielSelect {
        padding: 18px 20px; /* Plus grand */
        font-size: 20px; /* Texte encore plus grand */
        font-weight: 800; /* Très gras */
        border: 4px solid #004aad; /* Bordure plus épaisse et couleur plus vive */
        border-radius: 14px; /* Bordure arrondie */
        background-color: #f0f7ff; /* Fond très clair pour contraste avec texte noir */
        color: black; /* Texte noir */
        box-shadow: 0 4px 12px rgba(0, 74, 173, 0.5); /* Ombre permanente */
        transition: all 0.3s ease;
    }

        #typeMaterielSelect:focus {
            border-color: #007bff; /* Couleur plus vive au focus */
            box-shadow: 0 0 20px rgba(0, 123, 255, 0.7); /* Ombre plus forte */
            background-color: #ffffff; /* Fond blanc pur au focus */
            color: #000000; /* Texte noir */
            outline: none;
        }
    .form-control {
        padding: 11px 14px;
        font-size: 14px;
        border: 1px solid #d3dae6;
        border-radius: 10px;
        background-color: #f9f9fc;
        transition: 0.3s;
    }

        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 8px rgba(102,126,234,0.3);
        }

    textarea.form-control {
        min-height: 90px;
    }

    .btn-submit {
        display: block;
        width: 100%;
        padding: 13px;
        font-size: 15px;
        font-weight: bold;
        color: #fff;
        background: linear-gradient(45deg, #0d5586, #1e88a8);
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
    }

        .btn-submit:hover {
            background: linear-gradient(45deg, #5a67d8, #6b46c1);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(102,126,234,0.4);
        }

    .text-danger {
        font-size: 12px;
        margin-top: 3px;
    }

</style>
